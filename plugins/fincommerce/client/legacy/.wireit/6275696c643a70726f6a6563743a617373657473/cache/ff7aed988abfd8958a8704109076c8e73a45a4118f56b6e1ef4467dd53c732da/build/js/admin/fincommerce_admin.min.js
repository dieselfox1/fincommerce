!function(e,t){e(function(){if(void 0!==t){var i=e(".edit-php.post-type-product"),n=i.find(".page-title-action:first");if(0===i.find(".fincommerce-BlankState").length){if(t.urls.add_product&&n.first().attr("href",t.urls.add_product),t.urls.export_products){const e=document.createElement("a");e.href=t.urls.export_products,e.className="page-title-action",e.textContent=t.strings.export_products,n.after(e)}if(t.urls.import_products){const e=document.createElement("a");e.href=t.urls.import_products,e.className="page-title-action",e.textContent=t.strings.import_products,n.after(e)}}else n.hide();e(".fincommerce-progress-form-wrapper .button-next").on("click",function(){return e(".wc-progress-form-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),!0}),e(document.body).on("wc_add_error_tip",function(i,n,o){var r=n.position();0===n.parent().find(".wc_error_tip").length&&(n.after('<div class="wc_error_tip '+o+'">'+t[o]+"</div>"),n.parent().find(".wc_error_tip").css("left",r.left+n.width()-n.width()/2-e(".wc_error_tip").width()/2).css("top",r.top+n.height()).fadeIn("100"))}).on("wc_remove_error_tip",function(t,i,n){i.parent().find(".wc_error_tip."+n).fadeOut("100",function(){e(this).remove()})}).on("click",function(){e(".wc_error_tip").fadeOut("100",function(){e(this).remove()})}).on("blur",".wc_input_decimal[type=text], .wc_input_price[type=text], .wc_input_country_iso[type=text]",function(){e(".wc_error_tip").fadeOut("100",function(){e(this).remove()})}).on("change",".wc_input_price[type=text], .wc_input_decimal[type=text], .wc-order-totals #refund_amount[type=text], .wc_input_variations_price[type=text]",function(){var i,n,o=t.decimal_point;(e(this).is(".wc_input_price")||e(this).is(".wc_input_variations_price")||e(this).is("#refund_amount"))&&(o=t.mon_decimal_point),i=new RegExp("[^-0-9%\\"+o+"]+","gi"),n=new RegExp("\\"+o+"+","gi");var r=e(this).val(),c=r.replace(i,"").replace(n,o);r!==c&&e(this).val(c)}).on("keyup",".wc_input_price[type=text], .wc_input_decimal[type=text], .wc_input_country_iso[type=text], .wc-order-totals #refund_amount[type=text], .wc_input_variations_price[type=text]",function(){var i,n,o,r=!1;e(this).is(".wc_input_price")||e(this).is(".wc_input_variations_price")||e(this).is("#refund_amount")?(r=!0,i=new RegExp("[^-0-9%\\"+t.mon_decimal_point+"]+","gi"),o=new RegExp("[^\\"+t.mon_decimal_point+"]","gi"),n="i18n_mon_decimal_error"):e(this).is(".wc_input_country_iso")?(i=new RegExp("([^A-Z])+|(.){3,}","im"),n="i18n_country_iso_error"):(r=!0,i=new RegExp("[^-0-9%\\"+t.decimal_point+"]+","gi"),o=new RegExp("[^\\"+t.decimal_point+"]","gi"),n="i18n_decimal_error");var c=e(this).val(),a=c.replace(i,"");r&&1<a.replace(o,"").length&&(a=a.replace(o,"")),c!==a?e(document.body).triggerHandler("wc_add_error_tip",[e(this),n]):e(document.body).triggerHandler("wc_remove_error_tip",[e(this),n])}).on("change","#_sale_price.wc_input_price[type=text], .wc_input_price[name^=variable_sale_price]",function(){var i,n=e(this);i=-1!==n.attr("name").indexOf("variable")?n.parents(".variable_pricing").find(".wc_input_price[name^=variable_regular_price]"):e("#_regular_price"),parseFloat(window.accounting.unformat(n.val(),t.mon_decimal_point))>=parseFloat(window.accounting.unformat(i.val(),t.mon_decimal_point))&&e(this).val("")}).on("keyup","#_sale_price.wc_input_price[type=text], .wc_input_price[name^=variable_sale_price]",function(){var i,n=e(this);i=-1!==n.attr("name").indexOf("variable")?n.parents(".variable_pricing").find(".wc_input_price[name^=variable_regular_price]"):e("#_regular_price"),parseFloat(window.accounting.unformat(n.val(),t.mon_decimal_point))>=parseFloat(window.accounting.unformat(i.val(),t.mon_decimal_point))?e(document.body).triggerHandler("wc_add_error_tip",[e(this),"i18n_sale_less_than_regular_error"]):e(document.body).triggerHandler("wc_remove_error_tip",[e(this),"i18n_sale_less_than_regular_error"])}).on("keyup","input[type=text][name*=_global_unique_id]",function(){var t=e(this).val();/[^0-9\-]/.test(t)?e(document.body).triggerHandler("wc_add_error_tip",[e(this),"i18n_global_unique_id_error"]):e(document.body).triggerHandler("wc_remove_error_tip",[e(this),"i18n_global_unique_id_error"])}).on("change","input[type=text][name*=_global_unique_id]",function(){var t=e(this).val();e(this).val(t.replace(/[^0-9\-]/g,"").replace(/^-+|-+$/g,"")),e(document.body).triggerHandler("wc_remove_error_tip",[e(this),"i18n_global_unique_id_error"])}).on("init_tooltips",function(){e(".tips, .help_tip, .fincommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}),e(".column-wc_actions .wc-action-button").tipTip({fadeIn:50,fadeOut:50,delay:200}),e(".parent-tips").each(function(){e(this).closest("a, th").attr("data-tip",e(this).data("tip")).tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}).css("cursor","help")})}).on("click",".wc-confirm-delete",function(e){window.confirm(t.i18n_confirm_delete)||e.stopPropagation()}),e(document.body).trigger("init_tooltips"),e(".wc_input_table.sortable tbody").sortable({items:"tr",cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")}}),e(".wc_input_table.sortable tbody input").on("click",function(){e(this).trigger("focus")}),e(".wc_input_table .remove_rows").on("click",function(){var t=e(this).closest(".wc_input_table").find("tbody");t.find("tr.current").length>0&&t.find("tr.current").each(function(){e(this).remove()});return!1});var o=!1,r=!1,c=!1;e(document.body).on("keyup keydown",function(e){r=e.shiftKey,o=e.ctrlKey||e.metaKey}),e(".wc_input_table").on("focus click","input",function(t){var i=e(this).closest("table, tbody"),n=e(this).closest("tr");("focus"===t.type&&c!==n.index()||"click"===t.type&&e(this).is(":focus"))&&(c=n.index(),r||o?r?(e("tr",i).removeClass("current"),n.addClass("selected_now").addClass("current"),e("tr.last_selected",i).length>0&&(n.index()>e("tr.last_selected",i).index()?e("tr",i).slice(e("tr.last_selected",i).index(),n.index()).addClass("current"):e("tr",i).slice(n.index(),e("tr.last_selected",i).index()+1).addClass("current")),e("tr",i).removeClass("last_selected"),n.addClass("last_selected")):(e("tr",i).removeClass("last_selected"),o&&e(this).closest("tr").is(".current")?n.removeClass("current"):n.addClass("current").addClass("last_selected")):(e("tr",i).removeClass("current").removeClass("last_selected"),n.addClass("current").addClass("last_selected")),e("tr",i).removeClass("selected_now"))}).on("blur","input",function(){c=!1}),e(".fincommerce_page_wc-settings .shippingrows tbody tr:even, table.attributes-table tbody tr:nth-child(odd)").addClass("alternate"),e(document.body).on("click",".show_order_items",function(){return e(this).closest("td").find("table").toggle(),!1}),e("select.availability").on("change",function(){"all"===e(this).val()?e(this).closest("tr").next("tr").hide():e(this).closest("tr").next("tr").show()}).trigger("change"),e(".hide_options_if_checked").each(function(){e(this).find("input:eq(0)").on("change",function(){e(this).is(":checked")?e(this).closest("fieldset, tr").nextUntil(".hide_options_if_checked, .show_options_if_checked",".hidden_option").hide():e(this).closest("fieldset, tr").nextUntil(".hide_options_if_checked, .show_options_if_checked",".hidden_option").show()}).trigger("change")}),e(".show_options_if_checked").each(function(){e(this).find("input:eq(0)").on("change",function(){e(this).is(":checked")?e(this).closest("fieldset, tr").nextUntil(".hide_options_if_checked, .show_options_if_checked",".hidden_option").show():e(this).closest("fieldset, tr").nextUntil(".hide_options_if_checked, .show_options_if_checked",".hidden_option").hide()}).trigger("change")}),e("input#fincommerce_enable_reviews").on("change",function(){e(this).is(":checked")?e("#fincommerce_enable_review_rating").closest("tr").show():e("#fincommerce_enable_review_rating").closest("tr").hide()}).trigger("change"),e("table.attributes-table tbody tr:nth-child(odd)").addClass("alternate"),e(".wc_gateways").on("click",".wc-payment-gateway-method-toggle-enabled",function(){var i=e(this),n=i.closest("tr"),o=i.find(".fincommerce-input-toggle"),r={action:"fincommerce_toggle_gateway_enabled",security:t.nonces.gateway_toggle,gateway_id:n.data("gateway_id")};return o.addClass("fincommerce-input-toggle--loading"),e.ajax({url:t.ajax_url,data:r,dataType:"json",type:"POST",success:function(e){!0===e.data?(o.removeClass("fincommerce-input-toggle--enabled, fincommerce-input-toggle--disabled"),o.addClass("fincommerce-input-toggle--enabled"),o.removeClass("fincommerce-input-toggle--loading")):!1===e.data?(o.removeClass("fincommerce-input-toggle--enabled, fincommerce-input-toggle--disabled"),o.addClass("fincommerce-input-toggle--disabled"),o.removeClass("fincommerce-input-toggle--loading")):"needs_setup"===e.data&&(window.location.href=i.attr("href"))}}),!1}),e("#wpbody").on("click","#doaction, #doaction2",function(){if("remove_personal_data"===(e(this).is("#doaction")?e("#bulk-action-selector-top").val():e("#bulk-action-selector-bottom").val()))return window.confirm(t.i18n_remove_personal_data_notice)});var a=e("#marketplace-current-section-dropdown"),s=e("#marketplace-current-section-name"),l=!1;a.length&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?s.on("click",function(){(l=!l)?(a.addClass("is-open"),e(document).on("click",d)):(a.removeClass("is-open"),e(document).off("click",d))}):document.body.classList.add("no-touch"))}function d(t){a.is(t.target)||0!==a.has(t.target).length||(a.removeClass("is-open"),l=!1,e(document).off("click",d))}}),e(function(){var t={init:function(){this.$lock_dialog=e(".fincommerce_page_wc-orders #post-lock-dialog.order-lock-dialog"),0!==this.$lock_dialog.length&&"undefined"!=typeof fincommerce_admin_meta_boxes&&(e(document).off("heartbeat-send.refresh-lock"),e(document).off("heartbeat-tick.refresh-lock"),e(document).on("heartbeat-send",this.refresh_order_lock),e(document).on("heartbeat-tick",this.check_order_lock)),this.$list_table=e(".fincommerce_page_wc-orders table.wc-orders-list-table"),0!==this.$list_table.length&&(e(document).on("heartbeat-send",this.send_orders_in_list),e(document).on("heartbeat-tick",this.check_orders_in_list))},refresh_order_lock:function(e,t){delete t["wp-refresh-post-lock"],t["wc-refresh-order-lock"]=fincommerce_admin_meta_boxes.post_id},check_order_lock:function(i,n){var o=n["wc-refresh-order-lock"];o&&o.error&&(t.$lock_dialog.is(":visible")||(o.error.user_avatar_src&&t.$lock_dialog.find(".post-locked-avatar").empty().append(e("<img />",{"class":"avatar avatar-64 photo",width:64,height:64,alt:"",src:o.error.user_avatar_src,srcset:o.error.user_avatar_src_2x?o.error.user_avatar_src_2x+" 2x":undefined})),t.$lock_dialog.find(".currently-editing").text(o.error.message),t.$lock_dialog.show(),t.$lock_dialog.find(".wp-tab-first").trigger("focus")))},send_orders_in_list:function(e,i){i["wc-check-locked-orders"]=t.$list_table.find('tr input[name="id[]"]').map(function(){return this.value}).get()},check_orders_in_list:function(i,n){var o=n["wc-check-locked-orders"]||{};t.$list_table.find("tr").each(function(t,i){var n=e(i),r=n.find('input[name="id[]"]').val();o[r]?n.hasClass("wp-locked")||(n.find(".check-column checkbox").prop("checked",!1),n.addClass("wp-locked")):n.removeClass("wp-locked").find(".locked-info span").empty()})}};t.init()}),e(function(){const i=e('a.page-title-action[href*="page=product_exporter"]');if(!i.length)return;const n=i.attr("href"),o=i.text();e("#posts-filter").on("change",'#the-list input[type="checkbox"][name="post[]"], #cb-select-all-1, #cb-select-all-2',function(){setTimeout(function(){const r=e('#the-list input[type="checkbox"][name="post[]"]:checked').map(function(){return e(this).val()}).get();if(r.length>0){const e=new URL(n);e.searchParams.set("product_ids",r.join(",")),e.searchParams.set("_wpnonce",t.nonces.export_selected_products_nonce);const o=e.toString(),c=r.length,a=t.strings.export_selected_products.replace("%d",c);i.text(a).attr("href",o)}else i.text(o).attr("href",n)},0)})})}(jQuery,fincommerce_admin);